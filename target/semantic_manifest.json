{"semantic_models": [{"name": "locations", "defaults": {"agg_time_dimension": "opened_at"}, "description": "Location dimension table. The grain of the table is one row per location.\n", "node_relation": {"alias": "locations", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"locations\""}, "primary_entity": null, "entities": [{"name": "location", "description": null, "type": "primary", "role": null, "expr": "location_id", "metadata": null, "label": null}], "measures": [{"name": "average_tax_rate", "agg": "average", "description": "Average tax rate.", "create_metric": false, "expr": "tax_rate", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}], "dimensions": [{"name": "location_name", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "opened_at", "description": null, "type": "time", "is_partition": false, "type_params": {"time_granularity": "day", "validity_params": null}, "expr": "opened_at", "metadata": null, "label": null}], "label": null, "metadata": null}, {"name": "orders", "defaults": {"agg_time_dimension": "ordered_at"}, "description": "Order fact table. This table is at the order grain with one row per order.\n", "node_relation": {"alias": "orders", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"orders\""}, "primary_entity": null, "entities": [{"name": "order_id", "description": null, "type": "primary", "role": null, "expr": null, "metadata": null, "label": null}, {"name": "location", "description": null, "type": "foreign", "role": null, "expr": "location_id", "metadata": null, "label": null}, {"name": "customer", "description": null, "type": "foreign", "role": null, "expr": "customer_id", "metadata": null, "label": null}], "measures": [{"name": "order_total", "agg": "sum", "description": "The total amount for each order including taxes.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "order_count", "agg": "sum", "description": null, "create_metric": false, "expr": "1", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "tax_paid", "agg": "sum", "description": "The total tax paid on each order.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "order_cost", "agg": "sum", "description": "The cost for each order item. Cost is calculated as a sum of the supply cost for each order item.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}], "dimensions": [{"name": "ordered_at", "description": null, "type": "time", "is_partition": false, "type_params": {"time_granularity": "day", "validity_params": null}, "expr": "ordered_at", "metadata": null, "label": null}, {"name": "order_total_dim", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": "order_total", "metadata": null, "label": null}, {"name": "is_food_order", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "is_drink_order", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "customer_order_number", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}], "label": null, "metadata": null}, {"name": "order_item", "defaults": {"agg_time_dimension": "ordered_at"}, "description": "Items contatined in each order. The grain of the table is one row per order item.\n", "node_relation": {"alias": "order_items", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"order_items\""}, "primary_entity": null, "entities": [{"name": "order_item", "description": null, "type": "primary", "role": null, "expr": "order_item_id", "metadata": null, "label": null}, {"name": "order_id", "description": null, "type": "foreign", "role": null, "expr": "order_id", "metadata": null, "label": null}, {"name": "product", "description": null, "type": "foreign", "role": null, "expr": "product_id", "metadata": null, "label": null}], "measures": [{"name": "revenue", "agg": "sum", "description": "The revenue generated for each order item. Revenue is calculated as a sum of revenue associated with each product in an order.", "create_metric": false, "expr": "product_price", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "food_revenue", "agg": "sum", "description": "The revenue generated for each order item. Revenue is calculated as a sum of revenue associated with each product in an order.", "create_metric": false, "expr": "case when is_food_item is true then product_price else 0 end", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "drink_revenue", "agg": "sum", "description": "The revenue generated for each order item. Revenue is calculated as a sum of revenue associated with each product in an order.", "create_metric": false, "expr": "case when is_drink_item is true then product_price else 0 end", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "median_revenue", "agg": "median", "description": "The median revenue generated for each order item.", "create_metric": false, "expr": "product_price", "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}], "dimensions": [{"name": "ordered_at", "description": null, "type": "time", "is_partition": false, "type_params": {"time_granularity": "day", "validity_params": null}, "expr": "ordered_at", "metadata": null, "label": null}, {"name": "is_food_item", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "is_drink_item", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}], "label": null, "metadata": null}, {"name": "supplies", "defaults": null, "description": "Supplies dimension table. The grain of the table is one row per supply and product combination.\n", "node_relation": {"alias": "supplies", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"supplies\""}, "primary_entity": null, "entities": [{"name": "supply", "description": null, "type": "primary", "role": null, "expr": "supply_uuid", "metadata": null, "label": null}], "measures": [], "dimensions": [{"name": "supply_id", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "product_id", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "supply_name", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "supply_cost", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "is_perishable_supply", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}], "label": null, "metadata": null}, {"name": "customers", "defaults": {"agg_time_dimension": "first_ordered_at"}, "description": "Customer grain mart.\n", "node_relation": {"alias": "customers", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"customers\""}, "primary_entity": null, "entities": [{"name": "customer", "description": null, "type": "primary", "role": null, "expr": "customer_id", "metadata": null, "label": null}], "measures": [{"name": "customers", "agg": "count_distinct", "description": "Count of unique customers", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "count_lifetime_orders", "agg": "sum", "description": "Total count of orders per customer.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "lifetime_spend_pretax", "agg": "sum", "description": "Customer lifetime spend before taxes.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}, {"name": "lifetime_spend", "agg": "sum", "description": "Gross customer lifetime spend inclusive of taxes.", "create_metric": false, "expr": null, "agg_params": null, "metadata": null, "non_additive_dimension": null, "agg_time_dimension": null, "label": null}], "dimensions": [{"name": "customer_name", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "customer_type", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "first_ordered_at", "description": null, "type": "time", "is_partition": false, "type_params": {"time_granularity": "day", "validity_params": null}, "expr": null, "metadata": null, "label": null}, {"name": "last_ordered_at", "description": null, "type": "time", "is_partition": false, "type_params": {"time_granularity": "day", "validity_params": null}, "expr": null, "metadata": null, "label": null}], "label": null, "metadata": null}, {"name": "products", "defaults": null, "description": "Product dimension table. The grain of the table is one row per product.\n", "node_relation": {"alias": "products", "schema_name": "jaffle_shop", "database": "gaussdb", "relation_name": "\"gaussdb\".\"jaffle_shop\".\"products\""}, "primary_entity": null, "entities": [{"name": "product", "description": null, "type": "primary", "role": null, "expr": "product_id", "metadata": null, "label": null}], "measures": [], "dimensions": [{"name": "product_name", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "product_type", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "product_description", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "is_food_item", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "is_drink_item", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}, {"name": "product_price", "description": null, "type": "categorical", "is_partition": false, "type_params": null, "expr": null, "metadata": null, "label": null}], "label": null, "metadata": null}], "metrics": [{"name": "order_total", "description": "Sum of total order amonunt. Includes tax + revenue.", "type": "simple", "type_params": {"measure": {"name": "order_total", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_total", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Order Total"}, {"name": "new_customer_orders", "description": "New customer's first order count", "type": "simple", "type_params": {"measure": {"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": {"where_filters": [{"where_sql_template": "{{ Dimension('order_id__customer_order_number') }} = 1\n"}]}, "metadata": null, "label": "New Customers"}, {"name": "large_orders", "description": "Count of orders with order total over 20.", "type": "simple", "type_params": {"measure": {"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": {"where_filters": [{"where_sql_template": "{{ Dimension('order_id__order_total_dim') }} >= 20\n"}]}, "metadata": null, "label": "Large Orders"}, {"name": "orders", "description": "Count of orders.", "type": "simple", "type_params": {"measure": {"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Orders"}, {"name": "food_orders", "description": "Count of orders that contain food order items", "type": "simple", "type_params": {"measure": {"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": {"where_filters": [{"where_sql_template": "{{ Dimension('order_id__is_food_order') }} = true\n"}]}, "metadata": null, "label": "Food Orders"}, {"name": "drink_orders", "description": "Count of orders that contain drink order items", "type": "simple", "type_params": {"measure": {"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_count", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": {"where_filters": [{"where_sql_template": "{{ Dimension('order_id__is_drink_order') }} = true\n"}]}, "metadata": null, "label": "Drink Orders"}, {"name": "revenue", "description": "Sum of the product revenue for each order item. Excludes tax.", "type": "simple", "type_params": {"measure": {"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Revenue"}, {"name": "order_cost", "description": "Sum of cost for each order item.", "type": "simple", "type_params": {"measure": {"name": "order_cost", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "order_cost", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Order Cost"}, {"name": "median_revenue", "description": "The median revenue for each order item. Excludes tax.", "type": "simple", "type_params": {"measure": {"name": "median_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "median_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Median Revenue"}, {"name": "food_revenue", "description": "The revenue from food in each order", "type": "simple", "type_params": {"measure": {"name": "food_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "food_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Food Revenue"}, {"name": "drink_revenue", "description": "The revenue from drinks in each order", "type": "simple", "type_params": {"measure": {"name": "drink_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "drink_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Drink Revenue"}, {"name": "food_revenue_pct", "description": "The % of order revenue from food.", "type": "ratio", "type_params": {"measure": null, "numerator": {"name": "food_revenue", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, "denominator": {"name": "revenue", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "food_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, {"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Food Revenue %"}, {"name": "drink_revenue_pct", "description": "The % of order revenue from drinks.", "type": "ratio", "type_params": {"measure": null, "numerator": {"name": "drink_revenue", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, "denominator": {"name": "revenue", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "drink_revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, {"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Drink Revenue %"}, {"name": "revenue_growth_mom", "description": "Percentage growth of revenue compared to 1 month ago. Excluded tax", "type": "derived", "type_params": {"measure": null, "numerator": null, "denominator": null, "expr": "(current_revenue - revenue_prev_month)*100/revenue_prev_month", "window": null, "grain_to_date": null, "metrics": [{"name": "revenue", "filter": null, "alias": "current_revenue", "offset_window": null, "offset_to_grain": null}, {"name": "revenue", "filter": null, "alias": "revenue_prev_month", "offset_window": {"count": 1, "granularity": "month"}, "offset_to_grain": null}], "conversion_type_params": null, "input_measures": [{"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Revenue Growth % M/M"}, {"name": "order_gross_profit", "description": "Gross profit from each order.", "type": "derived", "type_params": {"measure": null, "numerator": null, "denominator": null, "expr": "revenue - cost", "window": null, "grain_to_date": null, "metrics": [{"name": "revenue", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, {"name": "order_cost", "filter": null, "alias": "cost", "offset_window": null, "offset_to_grain": null}], "conversion_type_params": null, "input_measures": [{"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, {"name": "order_cost", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Order Gross Profit"}, {"name": "cumulative_revenue", "description": "The cumulative revenue for all orders.", "type": "cumulative", "type_params": {"measure": {"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "revenue", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Cumulative Revenue (All Time)"}, {"name": "lifetime_spend_pretax", "description": "Customer's lifetime spend before tax", "type": "simple", "type_params": {"measure": {"name": "lifetime_spend_pretax", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "lifetime_spend_pretax", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "LTV Pre-tax"}, {"name": "count_lifetime_orders", "description": "Count of lifetime orders", "type": "simple", "type_params": {"measure": {"name": "count_lifetime_orders", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, "numerator": null, "denominator": null, "expr": null, "window": null, "grain_to_date": null, "metrics": [], "conversion_type_params": null, "input_measures": [{"name": "count_lifetime_orders", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Count Lifetime Orders"}, {"name": "average_order_value", "description": "LTV pre-tax / number of orders", "type": "derived", "type_params": {"measure": null, "numerator": null, "denominator": null, "expr": "lifetime_spend_pretax / count_lifetime_orders", "window": null, "grain_to_date": null, "metrics": [{"name": "count_lifetime_orders", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}, {"name": "lifetime_spend_pretax", "filter": null, "alias": null, "offset_window": null, "offset_to_grain": null}], "conversion_type_params": null, "input_measures": [{"name": "count_lifetime_orders", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}, {"name": "lifetime_spend_pretax", "filter": null, "alias": null, "join_to_timespine": false, "fill_nulls_with": null}]}, "filter": null, "metadata": null, "label": "Average Order Value"}], "project_configuration": {"time_spine_table_configurations": [{"location": "\"gaussdb\".\"jaffle_shop\".\"metricflow_time_spine\"", "column_name": "date_day", "grain": "day"}], "metadata": null, "dsi_package_version": {"major_version": "0", "minor_version": "5", "patch_version": "1"}}, "saved_queries": [{"name": "order_metrics", "query_params": {"metrics": ["orders", "new_customer_orders", "order_total", "food_orders", "drink_orders"], "group_by": ["TimeDimension('metric_time', 'day')"], "where": null}, "description": null, "metadata": null, "label": null, "exports": [{"name": "order_metrics", "config": {"export_as": "table", "schema_name": "jaffle_shop", "alias": "order_metrics"}}]}, {"name": "revenue_metrics", "query_params": {"metrics": ["revenue", "food_revenue", "drink_revenue"], "group_by": ["TimeDimension('metric_time', 'day')"], "where": null}, "description": null, "metadata": null, "label": null, "exports": [{"name": "revenue_metrics", "config": {"export_as": "table", "schema_name": "jaffle_shop", "alias": "revenue_metrics"}}]}, {"name": "customer_order_metrics", "query_params": {"metrics": ["count_lifetime_orders", "lifetime_spend_pretax", "average_order_value"], "group_by": ["Entity('customer')"], "where": null}, "description": null, "metadata": null, "label": null, "exports": [{"name": "customer_order_metrics", "config": {"export_as": "table", "schema_name": "jaffle_shop", "alias": "customer_order_metrics"}}]}]}